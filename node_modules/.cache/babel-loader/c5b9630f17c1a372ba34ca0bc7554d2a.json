{"ast":null,"code":"import { configureStore, createListenerMiddleware } from '@reduxjs/toolkit';\nimport textReducer, { textActions } from './features/text/textSlice';\nimport themeReducer from './features/theme/themeSlice';\nimport alertReducer, { alertActions } from './features/alert/alertSlice';\nimport messages from './alertMessages.json';\nconst textListenerMiddleware = createListenerMiddleware();\nconst alertListenerMiddleware = createListenerMiddleware();\nlet alertTimeoutID;\ntextListenerMiddleware.startListening({\n  predicate(action, currState, nextState) {\n    if (action.type === 'text/exec' || action.type === 'text/undo' || action.type === 'text/redo' || action.type === 'text/updateText' || action.type.search('alert/') !== -1 || action.type.search('theme/') !== -1) return false;else return true;\n  },\n  effect(action, listenerApi) {\n    listenerApi.dispatch(textActions.exec({\n      prevText: listenerApi.getOriginalState().text.text\n    }));\n  }\n});\nalertListenerMiddleware.startListening({\n  predicate(action, currState, nextState) {\n    if (action.type === 'text/exec' || action.type === 'text/undo' || action.type === 'text/redo' || action.type === 'text/updateText' || action.type.search('alert/') !== -1 || action.type.search('theme/') !== -1) return false;else return true;\n  },\n  effect(action, listenerApi) {\n    const type = listenerApi.getState().text.status;\n    const message = messages[action.type][type];\n    clearTimeout(alertTimeoutID);\n    listenerApi.dispatch(alertActions.setAlert({\n      message,\n      type\n    }));\n    alertTimeoutID = setTimeout(() => listenerApi.dispatch(alertActions.removeAlert()), 2000);\n  }\n});\n\n// Store configuration\nconst store = configureStore({\n  reducer: {\n    text: textReducer,\n    theme: themeReducer,\n    alert: alertReducer\n  },\n  middleware: getDefaultMiddleware => getDefaultMiddleware().concat([alertListenerMiddleware.middleware, textListenerMiddleware.middleware])\n});\nstore.subscribe(() => console.log(store.getState()));\nexport default store;","map":{"version":3,"names":["configureStore","createListenerMiddleware","textReducer","textActions","themeReducer","alertReducer","alertActions","messages","textListenerMiddleware","alertListenerMiddleware","alertTimeoutID","startListening","predicate","action","currState","nextState","type","search","effect","listenerApi","dispatch","exec","prevText","getOriginalState","text","getState","status","message","clearTimeout","setAlert","setTimeout","removeAlert","store","reducer","theme","alert","middleware","getDefaultMiddleware","concat","subscribe","console","log"],"sources":["/home/meeb/muneeb/react_projects/TextUtils/src/store/store.js"],"sourcesContent":["import { configureStore, createListenerMiddleware } from '@reduxjs/toolkit';\n\nimport textReducer, { textActions } from './features/text/textSlice';\nimport themeReducer from './features/theme/themeSlice';\nimport alertReducer, { alertActions } from './features/alert/alertSlice';\nimport messages from './alertMessages.json';\n\nconst textListenerMiddleware = createListenerMiddleware();\nconst alertListenerMiddleware = createListenerMiddleware();\nlet alertTimeoutID;\n\ntextListenerMiddleware.startListening({\n  predicate(action, currState, nextState) {\n    if (\n      action.type === 'text/exec' ||\n      action.type === 'text/undo' ||\n      action.type === 'text/redo' ||\n      action.type === 'text/updateText' ||\n      action.type.search('alert/') !== -1 ||\n      action.type.search('theme/') !== -1\n    )\n      return false;\n    else return true;\n  },\n  effect(action, listenerApi) {\n    listenerApi.dispatch(\n      textActions.exec({ prevText: listenerApi.getOriginalState().text.text })\n    );\n  },\n});\n\nalertListenerMiddleware.startListening({\n  predicate(action, currState, nextState) {\n    if (\n      action.type === 'text/exec' ||\n      action.type === 'text/undo' ||\n      action.type === 'text/redo' ||\n      action.type === 'text/updateText' ||\n      action.type.search('alert/') !== -1 ||\n      action.type.search('theme/') !== -1\n    )\n      return false;\n    else return true;\n  },\n  effect(action, listenerApi) {\n    const type = listenerApi.getState().text.status;\n    const message = messages[action.type][type];\n\n    clearTimeout(alertTimeoutID);\n\n    listenerApi.dispatch(\n      alertActions.setAlert({\n        message,\n        type,\n      })\n    );\n\n    alertTimeoutID = setTimeout(\n      () => listenerApi.dispatch(alertActions.removeAlert()),\n      2000\n    );\n  },\n});\n\n// Store configuration\nconst store = configureStore({\n  reducer: {\n    text: textReducer,\n    theme: themeReducer,\n    alert: alertReducer,\n  },\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware().concat([\n      alertListenerMiddleware.middleware,\n      textListenerMiddleware.middleware,\n    ]),\n});\n\nstore.subscribe(() => console.log(store.getState()));\n\nexport default store;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}